<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ruleta Cósmica de Sabiduría</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        cosmic: {
                            purple: '#00FFF8',
                            blue: '#3B82F6',
                            pink: '#EC4899',
                            gold: '#F59E0B',
                            emerald: '#10B981',
                            violet: '#8B5CF6'
                        }
                    }
                }
            }
        }
    </script>
    <style>

        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
            
        
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
        }

        .gatito {
         animation: float 2s ease-in-out infinite;
         filter: drop-shadow(2px 2px 5px rgb(36, 22, 235));
          }

        .esferita{
            filter: drop-shadow(2px 2px 5px rgb(36, 22, 235)); 
            animation: shake 4s ease-in-out infinite;
        }

        #modalesfera{
            box-shadow: 0 0 40px rgb(252, 93, 1);
        }

          .titulo{
            font-family: 'Press Start 2P', cursive;
            font-weight: bold;
            font-size: 2rem;
          }

        #esfera{
            box-shadow: 0 0 10px rgb(255, 115, 0);
            animation: float 3s ease-in-out infinite;
        }
  
       @keyframes float {
         0%, 100% { transform: translateY(0px); }
         50% { transform: translateY(-10px); }
        }

        @keyframes shake {
  0%   { transform: translateX(0); }
  25%  { transform: translateX(-5px); }
  50%  { transform: translateY(5px); }
  75%  { transform: translateX(-5px); }
  100% { transform: translateX(-5); }
}
        
        .cosmic-gradient {
            background: linear-gradient(135deg, #ea6666 0%, #a24b4b 100%);
        }
        
        .cosmic-gradient-dark {
            background: linear-gradient(135deg, #721e1e 0%, #00FFF8 100%);
        }
        
        .wheel-container {
            perspective: 1000px;
        }
        
        .wheel-shadow {
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }
        
        .pulse-glow {
            animation: pulse-glow 2s ease-in-out infinite alternate;
        }
        
        @keyframes pulse-glow {
            from {
                box-shadow: 0 0 20px rgba(92, 246, 125, 0.5);
            }
            to {
                box-shadow: 0 0 30px rgba(199, 65, 65, 0.8);
            }
        }
        
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        
        @keyframes floating {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        .spinning {
            animation: spin 3s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(1800deg); }
        }
        
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }
        
        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: rgb(255, 255, 255);
            border-radius: 50%;
            animation: twinkle 2s infinite;
        }
        
        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }
        
        .modal-backdrop {
            backdrop-filter: blur(5px);
        }
        
        .slide-in {
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes fade-in {
         from {
         opacity: 0;
         transform: scale(0.95);
            }
           to {
          opacity: 1;
          transform: scale(1);
         }
         }

.animate-fade-in {
  animation: fade-in 0.3s ease-out;
}
    </style>
</head>
<!--aqui se cambia el fondo de tailwinds-->
<body class="min-h-screen transition-colors duration-300 bg-gradient-to-br from-yellow-100 to-blue-100 dark:from-purple-700 dark:via-blue-800 dark:to-red-900 ">

    <!-- Estrellas de fondo -->
    <div class="stars" id="stars"></div>
    
    <!-- Header -->
    <header class="relative z-10 p-6">
        <div class="max-w-6xl mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-3">
                <div class="w-20 h-20">
                    <img src="dinarius.png" alt="gatito" class="w-full h-full object-contain gatito" />
                </div>
                <h1 class="titulo text-gray-800 dark:text-white" id="titulo">Ruleta Cósmica de Sabiduría</h1>
              </div>
            
            <div class="flex items-center space-x-4">
                <button id="themeToggle" class="p-2 rounded-full bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-all duration-300">
                    <span class="text-xl">🌙</span>
                </button>
                <button id="soundToggle" class="p-2 rounded-full bg-white dark:bg-gray-800 shadow-lg hover:shadow-xl transition-all duration-300">
                    <span class="text-xl">🔊</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Contenido principal -->
    <main class="relative z-10 max-w-6xl mx-auto px-6 py-12">
        <!-- Mensaje de bienvenida -->
        <div class="text-center mb-12">
            <h2 class="text-4xl font-bold text-gray-800 dark:text-white mb-4">
                ✨ Descubre tu Mensaje Cósmico del Día ✨
            </h2>
            <p class="text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">
                Gira la ruleta sagrada y recibe una pregunta poderosa que transformará tu relación con la abundancia y la conciencia
            </p>
        </div>

        <!-- Contador de uso diario -->
        <div class="text-center mb-8">
            <div id="dailyStatus" class="inline-flex items-center px-4 py-2 rounded-full bg-white dark:bg-gray-800 shadow-lg">
                <span class="text-green-500 mr-2">✓</span>
                <span class="text-gray-700 dark:text-gray-300">Tirada disponible hoy</span>
            </div>
        </div>

        <!-- Ruleta -->
        <div class="flex justify-center mb-12">
            <div class="wheel-container">
                <div class="relative">
                    <canvas id="wheelCanvas" width="400" height="400" class="wheel-shadow rounded-full"></canvas>
                    <!-- Puntero -->
                    <div class="absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-2 z-10">
                        <div class="w-6 h-8 bg-gradient-to-b from-yellow-400 to-orange-500 rounded-b-full shadow-lg"></div>
                    </div>
                    <!-- Botón central -->
                    <button id="spinButton" class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-20 h-20 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full shadow-xl hover:shadow-2xl transition-all duration-300 flex items-center justify-center text-black font-bold text-sm pulse-glow">
                        GIRAR
                    </button>
                </div>
            </div>
        </div>

        <!-- Mensaje del día -->
        <div id="dailyMessage" class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl p-8 mb-8 hidden">
            <div class="text-center">
                <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full mb-6">
                    <span class="text-white text-2xl">🌟</span>
                </div>
                <h3 class="text-2xl font-bold text-gray-800 dark:text-white mb-4">Tu Pregunta Cósmica del Día</h3>
                <p id="questionText" class="text-lg text-gray-600 dark:text-gray-300 italic mb-6 leading-relaxed"></p>
                <div class="border-t dark:border-gray-700 pt-6">
                    <h4 class="text-lg font-semibold text-gray-800 dark:text-white mb-3">💫 Reflexión Guiada</h4>
                    <p id="reflectionText" class="text-gray-600 dark:text-gray-300 leading-relaxed"></p>
                </div>
            </div>
        </div>

        <!-- Frase motivacional diaria -->
        <div class="bg-gradient-to-r from-purple-500 to-pink-500 rounded-2xl p-8 text-white text-center mb-8">
            <h3 class="text-xl font-bold mb-4">🌟 Frase Cósmica del Día</h3>
            <p id="dailyQuote" class="text-lg italic"></p>
        </div>

        <!-- Lección de disciplina -->
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8">
            <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-4 text-center">
                ⚡ Lección de Disciplina Energética
            </h3>
            <p id="disciplineLesson" class="text-gray-600 dark:text-gray-300 leading-relaxed text-center"></p>
        </div>

    </main>
     

    <!-- Modal de límite diario -->
    <div id="limitModal" class="fixed inset-0 bg-black bg-opacity-50 modal-backdrop hidden z-50 flex items-center justify-center p-4">
        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full p-8 slide-in">
            <div class="text-center">
                <div class="inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-orange-500 to-red-500 rounded-full mb-6">
                    <span class="text-white text-2xl">⏰</span>
                </div>
                <h3 class="text-2xl font-bold text-gray-800 dark:text-white mb-4">Paciencia Cósmica</h3>
                <p class="text-gray-600 dark:text-gray-300 mb-6">
                    Ya has recibido tu mensaje del día. La sabiduría cósmica requiere tiempo para integrarse. 
                    Regresa mañana para una nueva revelación.
                </p>
                <button id="closeModal" class="bg-gradient-to-r from-purple-500 to-pink-500 text-white px-6 py-3 rounded-full font-semibold hover:shadow-lg transition-all duration-300">
                    Entendido
                </button>
            </div>
        </div>
    </div>

    
    <div id="modalEsfera" class="fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center z-50 hidden">
        <div id="modalesfera" class="bg-white dark:bg-gray-900 p-12 rounded-2xl shadow-2xl border-4 border--600 w-full max-w-4xl flex flex-col sm:flex-row items-center animate-fade-in space-y-6 sm:space-y-0 sm:space-x-10">
          
          <!-- Imagen de la esfera -->
          <div class="w-full sm:w-1/3 flex justify-center">
            <img src="1f52e-removebg-preview.png" alt="Esfera mágica" class="w-48 sm:w-56 esferita">
          </div>
      
          <!-- Contenido creativo más amplio -->
<div class="w-full sm:w-2/3 text-center sm:text-left text-2xl">
  <h2 class="text-5xl font-bold text-purple-700 mb-5">⚱️ Esfera Mágica</h2>

  <!-- Aquí va la frase aleatoria -->
 <div id="mensajeMistico" class="text-gray-700 dark:text-gray-300 mb-6">
  <h3 id="cristalNombre" class="text-3xl sm:text-4xl font-semibold text-purple-600 mb-2">🌟 Cristal del Día</h3>
  <p id="afirmacionTexto" class="italic text-xl sm:text-2xl mb-4">Afirmación mágica aquí...</p>
  <p id="descripcionCristal" class="text-base sm:text-xl">Descripción energética del cristal aquí...</p>
</div>

  <button onclick="cerrarModal()" class="mt-4 px-10 py-4 bg-purple-600 text-white text-xl rounded-full hover:bg-purple-700 transition-all duration-200">
    Cerrar mensaje
  </button>
</div>
      
        </div>
      </div>

<button 
  id="botonLibro"
  class="fixed top-6 left-6 bg-purple-600 hover:bg-purple-700 text-white p-4 rounded-full shadow-xl transition-all duration-300 z-50"
  aria-label="Abrir libro"
>
  <i data-lucide="book" class="w-6 h-6"></i>
</button>


      <!-- 📘 Carta Filosófica -->
<div id="cartaFilosofica" class="hidden absolute top-24 left-6 bg-white dark:bg-gray-900 border-l-8 border-purple-600 shadow-2xl rounded-2xl p-6 max-w-sm z-40 space-y-4 transition-all duration-300">
  <h3 class="text-2xl font-bold text-purple-700">📘 Cita Filosófica</h3>
  <p id="citaFilosoficaTexto" class="italic text-gray-800 dark:text-gray-200 text-lg leading-relaxed">
    “Cargando sabiduría…”
  </p>
  <button onclick="cerrarCarta()" class="text-purple-600 hover:underline text-sm">Cerrar</button>
</div>


    <script>
        // === DATOS Y CONFIGURACIÓN ===
        const cosmicQuestions = [
            "¿Qué energía, espacio, conciencia y elección puedo ser para recibir más dinero de lo que jamás imaginé, con total facilidad?",
            "¿Qué tomaría para que el dinero me busque a mí como yo busco el café en las mañanas?",
            "Si no tuviera ningún punto de vista sobre el dinero, ¿cuánto podría recibir hoy?",
            "¿Y si el dinero fuera mi amante, cómo le estaría tratando?",
            "¿Qué está creando escasez en mi vida que podría soltar ahora mismo?",
            "¿Qué es el dinero para mí... y de quién aprendí eso?",
            "¿Qué juicios estoy usando para limitar el dinero que puedo elegir?",
            "¿Qué me impide reconocer que ya soy una energía de riqueza?",
            "¿Cuánto más dinero podría tener si me atreviera a disfrutar sin culpa?",
            "¿Qué posibilidades infinitas con el dinero están disponibles hoy que aún no he reconocido?",
            "¿Qué debo dejar de controlar para que el dinero fluya con más gozo?",
            "¿Estoy dispuesta a recibir dinero de formas inesperadas y sin esfuerzo?",
            "¿Qué estoy evitando o defendiendo que me impide ser millonaria?",
            "¿Qué más es posible con el dinero que nunca nadie me enseñó?",
            "¿Qué pasaría si dejara de rechazar ser rica?",
            "¿Y si el dinero no fuera un problema… qué elegiría hoy?",
            "¿Qué estoy copiando de mi familia sobre el dinero que ya no me sirve?",
            "¿Qué tomaría para que el dinero se muestre hoy con facilidad, alegría y gloria?",
            "¿Qué nivel de gratitud y gozo puedo ser hoy para duplicar mis ingresos?",
            "¿Cuánto dinero estoy dispuesto(a) a tener sin perder mi esencia?",
            "¿Qué conciencia del dinero estoy listo(a) para recibir hoy?",
            "¿Qué energía puedo ser para atraer clientes que me paguen con gozo?",
            "¿Qué más puedo vender, crear o elegir que sea una contribución financiera para mí y para el mundo?",
            "¿Qué estoy haciendo más difícil de lo que realmente es con el dinero?",
            "¿Qué parte de mi magia estoy ignorando que crearía más dinero de inmediato?",
            "¿Qué me impide ser el imán que realmente soy para el dinero?",
            "¿Qué tomaría para elegir más dinero sin tener que justificarlo?",
            "¿Y si el dinero no fuera serio ni pesado, cómo sería?",
            "¿Qué riqueza energética está disponible para mí ahora mismo?",
            "¿Qué puedo ser o hacer hoy que cree más dinero ahora y para toda la eternidad?"
        ];

        const reflections = [
            "Permite que esta pregunta resuene en tu corazón. La energía que buscas ya existe dentro de ti, solo necesita ser reconocida y expandida.",
            "Reflexiona sobre las formas en que has estado limitando tu capacidad de recibir. ¿Qué creencias puedes soltar hoy?",
            "Imagina por un momento que no tienes limitaciones. ¿Qué se siente diferente en tu energía cuando te permites esta expansión?",
            "Considera esta pregunta como una invitación a una nueva relación con la abundancia. ¿Qué cambiaría si fueras completamente abierto(a)?",
            "Esta pregunta es una llave hacia una mayor conciencia. Permite que abra puertas que ni siquiera sabías que existían.",
            "Observa qué surge cuando contemplas esta pregunta sin juzgar. La sabiduría often llega en susurros, no en gritos.",
            "¿Qué pasaría si esta pregunta fuera la respuesta que has estado buscando? Permite que te transforme desde adentro.",
            "Lleva esta pregunta contigo hoy. Permite que se mueva através de ti y note qué cambia en tu experiencia.",
            "Esta pregunta contiene una frecuencia especial. Permite que active todo tu potencial de abundancia y conciencia.",
            "Contempla esta pregunta como una medicina energética. ¿Qué aspectos de tu vida está sanando ahora mismo?"
        ];

        const dailyQuotes = [
            "El universo conspira para que recibas exactamente lo que estás dispuesto(a) a reconocer que mereces.",
            "Tu energía es tu moneda más valiosa. Inviértela sabiamente en lo que expande tu conciencia.",
            "No eres víctima de tus circunstancias, eres el arquitecto de tu realidad energética.",
            "La abundancia no es algo que logras, es algo que ya eres. Solo necesitas recordarlo.",
            "Cada momento es una oportunidad para elegir una realidad más expansiva y gozosa.",
            "Tu capacidad de recibir está directamente relacionada con tu disposición a ser vulnerable.",
            "El dinero es energía en movimiento. Permite que fluya através de ti sin resistencia.",
            "Eres mucho más poderoso(a) de lo que has estado dispuesto(a) a reconocer.",
            "La magia sucede cuando dejas de controlar y empiezas a permitir.",
            "Tu única limitación es tu disposición a reconocer tus posibilidades infinitas."
        ];

        const disciplineLessons = [
            "Disciplina Energética: Dedica 5 minutos cada mañana a sentir gratitud por el dinero que ya tienes, sin importar la cantidad.",
            "Acción Consciente: Hoy, antes de gastar dinero, pregúntate: '¿Esta compra expande mi energía o la contrae?'",
            "Práctica de Abundancia: Bendice cada billete que pase por tus manos, tanto cuando lo recibas como cuando lo entregues.",
            "Ritual de Prosperidad: Camina durante 10 minutos visualizando que ya tienes la abundancia que deseas.",
            "Conciencia Financiera: Revisa tus gastos del día con amor, no con juicio. ¿Qué te enseñan sobre tus patrones?",
            "Expansión Energética: Practica decir 'SÍ' a oportunidades pequeñas que normalmente rechazarías por miedo.",
            "Limpieza Energética: Organiza tu espacio físico como acto de amor hacia la abundancia que está llegando.",
            "Comunicación Consciente: Habla de dinero con gratitud y posibilidad, nunca con escasez o queja.",
            "Inversión en Ti: Dedica recursos (tiempo, energía o dinero) a algo que nutra tu crecimiento personal.",
            "Práctica de Recibir: Acepta un cumplido hoy sin desviarlo. Practica el arte de recibir con gracia."
        ];


       const mensajesMisticos = [
  {
    cristal: "Amatista 💜",
    afirmacion: "Mi mente está en calma y mi intuición me guía con claridad.",
    descripcion: "Fomenta la paz interior y la conexión espiritual."
  },
  {
    cristal: "Citrino 💛",
    afirmacion: "Estoy alineado con la energía del éxito y la abundancia.",
    descripcion: "Atrae prosperidad, confianza y alegría."
  },
  {
    cristal: "Cuarzo Rosa 💗",
    afirmacion: "Me amo profundamente y atraigo relaciones armoniosas.",
    descripcion: "Sana el corazón y abre el flujo del amor."
  },
  {
    cristal: "Obsidiana Negra ⚫",
    afirmacion: "Estoy protegido y libero lo que ya no me pertenece.",
    descripcion: "Limpia energías negativas y otorga fuerza interior."
  },
  {
    cristal: "Lapislázuli 🔵",
    afirmacion: "Mi voz es auténtica y mi verdad se expresa con amor.",
    descripcion: "Estimula la sabiduría, la intuición y la comunicación."
  },
  {
    cristal: "Aventurina Verde 💚",
    afirmacion: "La suerte y las oportunidades llegan a mí con facilidad.",
    descripcion: "Atrae buena fortuna, crecimiento y renovación."
  },
  {
    cristal: "Pirita ✨",
    afirmacion: "El dinero fluye hacia mí de forma constante y poderosa.",
    descripcion: "Activa la energía del oro, la acción y la prosperidad."
  },
  {
    cristal: "Cuarzo Claro 🤍",
    afirmacion: "Soy un canal de luz pura y claridad.",
    descripcion: "Amplifica intenciones, limpia y equilibra."
  },
  {
    cristal: "Turmalina Negra ⚫",
    afirmacion: "Estoy enraizado, estable y rodeado de protección divina.",
    descripcion: "Escudo energético contra lo tóxico y el estrés."
  },
  {
    cristal: "Ojo de Tigre 🐯",
    afirmacion: "Mi voluntad es firme y avanzo con valentía.",
    descripcion: "Equilibra, da coraje y atrae éxito material."
  }
];
// Función para mostrar frase aleatoria
function mostrarMensajeMistico() {
  const indice = Math.floor(Math.random() * mensajesMisticos.length);
  const mensaje = mensajesMisticos[indice];

  document.getElementById("cristalNombre").textContent = mensaje.cristal;
  document.getElementById("afirmacionTexto").textContent = mensaje.afirmacion;
  document.getElementById("descripcionCristal").textContent = mensaje.descripcion;
}

// Llama esta función cuando se abra el modal
mostrarMensajeMistico();

        function mostrarModal() {
    document.getElementById('modalEsfera').classList.remove('hidden');
  }

  function cerrarModal() {
    document.getElementById('modalEsfera').classList.add('hidden');}

        // === VARIABLES GLOBALES ===
        let canvas, ctx;
        let isSpinning = false;
        let soundEnabled = true;
        let currentRotation = 0;
        let selectedQuestionIndex = 0;

        // === INICIALIZACIÓN ===
       document.addEventListener('DOMContentLoaded', function() {
    initializeStoredData();  // primero carga las preferencias del usuario (tema, sonido)
    initializeApp();         // luego carga la app con la ruleta
});
        function initializeApp() {
            canvas = document.getElementById('wheelCanvas');
            ctx = canvas.getContext('2d');
            
            setupEventListeners();
            drawWheel();
            createStars();
            checkDailyStatus();
            loadDailyContent();
        }

        function setupEventListeners() {
            document.getElementById('spinButton').addEventListener('click', spinWheel);
            document.getElementById('themeToggle').addEventListener('click', toggleTheme);
            document.getElementById('soundToggle').addEventListener('click', toggleSound);
            document.getElementById('closeModal').addEventListener('click', closeModal);
            
            // Inicializar tema
            if (isDarkMode()) {
                document.documentElement.classList.add('dark');
                document.getElementById('themeToggle').innerHTML = '<span class="text-xl">☀️</span>';
            }
        }

        // === FUNCIONES DE LA RULETA ===
      function drawWheel() {
    const centerX = canvas.width / 2;
    const centerY = canvas.height / 2;
    const radius = 180;
    const segments = 30;
    const anglePerSegment = (2 * Math.PI) / segments;

    const colors = [
        '#6B46C1', '#8B5CF6', '#EC4899', '#F59E0B', '#10B981', '#3B82F6',
        '#EF4444', '#F97316', '#84CC16', '#06B6D4', '#8B5CF6', '#EC4899'
    ];

    ctx.clearRect(0, 0, canvas.width, canvas.height);

    // Guardar el estado original
    ctx.save();

    // Mover el centro de rotación
    ctx.translate(centerX, centerY);
    ctx.rotate(currentRotation);

    for (let i = 0; i < segments; i++) {
        const startAngle = i * anglePerSegment;
        const endAngle = startAngle + anglePerSegment;

        ctx.beginPath();
        ctx.moveTo(0, 0);
        ctx.arc(0, 0, radius, startAngle, endAngle);
        ctx.closePath();

        ctx.fillStyle = colors[i % colors.length];
        ctx.fill();

        ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
        ctx.lineWidth = 2;
        ctx.stroke();

        // Dibujar números
        const textAngle = startAngle + anglePerSegment / 2;
        const textX = Math.cos(textAngle) * (radius - 30);
        const textY = Math.sin(textAngle) * (radius - 30);

        ctx.save();
        ctx.translate(textX, textY);
        ctx.rotate(textAngle);
        ctx.fillStyle = 'white';
        ctx.font = 'bold 14px Inter';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText((i + 1).toString(), 0, 0);
        ctx.restore();
    }

    // Restaurar el contexto
    ctx.restore();

    // Dibujar el círculo central sin rotación
    ctx.beginPath();
    ctx.arc(centerX, centerY, 40, 0, 2 * Math.PI);
    ctx.fillStyle = 'rgba(0, 0, 0, 0.1)';
    ctx.fill();
}

        function spinWheel() {
            if (isSpinning) return;
            
            if (hasSpunToday()) {
                showLimitModal();
                return;
            }

            isSpinning = true;
            document.getElementById('spinButton').disabled = true;
            document.getElementById('spinButton').textContent = 'GIRANDO...';

            // Sonido
            if (soundEnabled) {
                playSpinSound();
            }

            // Calcular rotación final
            const spins = 5 + Math.random() * 3; // 5-8 vueltas
            const finalRotation = currentRotation + (spins * 2 * Math.PI);
            const duration = 3000; // 3 segundos
            
            // Determinar pregunta seleccionada
            const segmentAngle = (2 * Math.PI) / 30;
            const normalizedRotation = finalRotation % (2 * Math.PI);
            const pointerAngle = (2 * Math.PI) - normalizedRotation + (Math.PI / 2);
           const segments = 30;
           selectedQuestionIndex = (Math.floor(pointerAngle / segmentAngle) + segments) % segments;

            // Animar
            animateWheel(currentRotation, finalRotation, duration);
        }

        const citasFilosoficas = [
 "“El dinero es un excelente sirviente, pero un pésimo amo.” – Francis Bacon",
  "“El propósito de la riqueza es servir, no dominar.” – Mahatma Gandhi",
  "“Donde tus talentos y las necesidades del mundo se cruzan, allí está tu vocación.” – Aristóteles",
  "“La verdadera abundancia comienza con la gratitud.” – Eckhart Tolle",
  "“El éxito no se mide por lo que logras, sino por la energía que inspiras.” – Marianne Williamson",
  "“Ganar dinero no es el objetivo; el objetivo es crecer y servir desde tu esencia.” – Deepak Chopra",
  "“No es más rico quien más tiene, sino quien menos necesita.” – Epicteto",
  "“El universo recompensa la acción alineada con tu propósito.” – Joe Dispenza",
  "“Tu trabajo es descubrir tu mundo y luego entregarte a él con todo tu corazón.” – Buda",
  "“Haz de tu vida un negocio sagrado. Todo lo que haces deja huella energética.” – Anónimo",
  "“La riqueza externa es un reflejo de tu riqueza interna.” – Louise Hay",
  "“Si sirves a los demás con integridad, el dinero llegará como consecuencia.” – Tony Robbins",
  "“El dinero es una extensión de tu conciencia. Dale dirección desde tu alma.” – Anónimo",
  "“Haz lo que amas y el dinero llegará, pero llega más rápido si también sirves al mundo.” – Wayne Dyer",
  "“El valor está en lo que eres, no en lo que posees.” – Ralph Waldo Emerson"
];

function mostrarCartaFilosofica() {
  const citaAleatoria = citasFilosoficas[Math.floor(Math.random() * citasFilosoficas.length)];
  document.getElementById("citaFilosoficaTexto").textContent = citaAleatoria;
  document.getElementById("cartaFilosofica").classList.remove("hidden");
}

function cerrarCarta() {
  document.getElementById("cartaFilosofica").classList.add("hidden");
}

// Conectar el botón al evento
document.getElementById("botonLibro").addEventListener("click", () => {
  mostrarCartaFilosofica();
});

        function animateWheel(startRotation, endRotation, duration) {
            const startTime = Date.now();
            
            function animate() {
                const elapsed = Date.now() - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                // Easing function para desaceleración
                const easeOut = 1 - Math.pow(1 - progress, 3);
                
                currentRotation = startRotation + (endRotation - startRotation) * easeOut;
                drawWheel();
                
                if (progress < 1) {
                    requestAnimationFrame(animate);
                } else {
                    finishSpin();
                }
            }
            
            animate();
        }

        function finishSpin() {
            isSpinning = false;
            document.getElementById('spinButton').disabled = false;
            document.getElementById('spinButton').textContent = 'GIRAR';

                currentRotation = currentRotation % (2 * Math.PI);
            
            // Marcar como usado hoy
            markAsSpunToday();
            
            // Mostrar pregunta
            showDailyQuestion();
            
            // Actualizar status
            updateDailyStatus();
        }

        // === FUNCIONES DE CONTENIDO ===
        function showDailyQuestion() {
            const questionElement = document.getElementById('questionText');
            const reflectionElement = document.getElementById('reflectionText');
            const messageContainer = document.getElementById('dailyMessage');
            
            const question = cosmicQuestions[selectedQuestionIndex];
            const reflection = reflections[selectedQuestionIndex % reflections.length];
            
            questionElement.textContent = question;
            reflectionElement.textContent = reflection;
            
            messageContainer.classList.remove('hidden');
            messageContainer.classList.add('slide-in');
            
            // Scroll suave hacia el mensaje
            setTimeout(() => {
                messageContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 500);
        }

        function loadDailyContent() {
            // Cargar frase del día
            const today = new Date();
            const dayOfYear = Math.floor((today - new Date(today.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
            const quoteIndex = dayOfYear % dailyQuotes.length;
            document.getElementById('dailyQuote').textContent = dailyQuotes[quoteIndex];
            
            // Cargar lección de disciplina
            const lessonIndex = dayOfYear % disciplineLessons.length;
            document.getElementById('disciplineLesson').textContent = disciplineLessons[lessonIndex];
        }

        // === FUNCIONES DE ESTADO DIARIO ===
        function hasSpunToday() {
            const today = new Date().toDateString();
            const lastSpin = getStoredData('lastSpinDate');
            return lastSpin === today;
        }

        function markAsSpunToday() {
            const today = new Date().toDateString();
            setStoredData('lastSpinDate', today);
            setStoredData('todayQuestion', selectedQuestionIndex);
        }

        function checkDailyStatus() {
            if (hasSpunToday()) {
                // Mostrar pregunta del día si ya giró
                const storedQuestionIndex = getStoredData('todayQuestion');
                if (storedQuestionIndex !== null) {
                    selectedQuestionIndex = parseInt(storedQuestionIndex);
                    showDailyQuestion();
                }
            }
            updateDailyStatus();
        }

        function updateDailyStatus() {
            const statusElement = document.getElementById('dailyStatus');
            if (hasSpunToday()) {
                statusElement.innerHTML = '<span class="text-orange-500 mr-2">⏰</span><span class="text-gray-700 dark:text-gray-300">Ya recibiste tu mensaje hoy</span>';
            } else {
                statusElement.innerHTML = '<span class="text-green-500 mr-2">✓</span><span class="text-gray-700 dark:text-gray-300">Tirada disponible hoy</span>';
            }
        }

        // === FUNCIONES DE MODAL ===
        function showLimitModal() {
            document.getElementById('limitModal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('limitModal').classList.add('hidden');
        }

        // === FUNCIONES DE TEMA ===
        function toggleTheme() {
            const html = document.documentElement;
            const themeToggle = document.getElementById('themeToggle');
            const tituloToggle = document.getElementById('titulo')
            
            if (html.classList.contains('dark')) {
                html.classList.remove('dark');
                
                themeToggle.innerHTML = '<span class="text-xl">🌙</span>';
                setStoredData('theme', 'light');
            } else {
                html.classList.add('dark');
                themeToggle.innerHTML = '<span class="text-xl">☀️</span>';

                setStoredData('theme', 'dark');
            }
        }

        function isDarkMode() {
            const storedTheme = getStoredData('theme');
            return storedTheme === 'dark' || (!storedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches);
        }

        // === FUNCIONES DE SONIDO ===
        function toggleSound() {
            soundEnabled = !soundEnabled;
            const soundToggle = document.getElementById('soundToggle');
            soundToggle.innerHTML = soundEnabled ? '<span class="text-xl">🔊</span>' : '<span class="text-xl">🔇</span>';
            setStoredData('soundEnabled', soundEnabled);
        }

        function playSpinSound() {
            const audio = document.getElementById('spinSound');
            audio.currentTime = 0;
            audio.play().catch(e => console.log('Error playing sound:', e));
        }

        // === FUNCIONES DE EFECTOS VISUALES ===
        function createStars() {
            const starsContainer = document.getElementById('stars');
            const numStars = 50;
            
            for (let i = 0; i < numStars; i++) {
                const star = document.createElement('div');
                star.className = 'star';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 2 + 's';
                star.style.animationDuration = (Math.random() * 3 + 2) + 's';
                starsContainer.appendChild(star);
            }
        }

        // === FUNCIONES DE ALMACENAMIENTO ===
        function setStoredData(key, value) {
    localStorage.setItem(key, JSON.stringify(value));
}

function getStoredData(key) {
    const value = localStorage.getItem(key);
    return value ? JSON.parse(value) : null;
}
        

        // === INICIALIZACIÓN DE DATOS ===
        function initializeStoredData() {
            // Cargar configuraciones guardadas
            const savedTheme = getStoredData('theme');
            const savedSound = getStoredData('soundEnabled');
            
            if (savedTheme === 'dark') {
                document.documentElement.classList.add('dark');
                document.getElementById('themeToggle').innerHTML = '<span class="text-xl">☀️</span>';
            }
            
            if (savedSound === false) {
                soundEnabled = false;
                document.getElementById('soundToggle').innerHTML = '<span class="text-xl">🔇</span>';
            }
        }

        // Inicializar datos almacenados al cargar
      
    </script>

    <!-- Incluye este script en tu <head> para los íconos -->
<script src="https://unpkg.com/lucide@latest"></script>

<!-- Barra de navegación inferior -->
<nav class="fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-900 shadow-lg border-t border-gray-200 dark:border-gray-700 z-50">
  <div class="flex justify-around items-center h-16">
    
    <!-- Icono: Inicio -->
    <button onclick="location.href='index.html'" class="flex flex-col items-center text-gray-600 dark:text-gray-300 hover:text-yellow-500 transition">
      <i data-lucide="home" class="w-6 h-6"></i>
      <span class="text-xs">Inicio</span>
    </button>

    <!-- Icono: Llama -->
    <button onclick="location.href='fuego.html'" class="flex flex-col items-center text-gray-600 dark:text-gray-300 hover:text-red-500 transition">
      <i data-lucide="flame" class="w-6 h-6"></i>
      <span class="text-xs">Energía</span>
    </button>

    <!-- Botón central: Más -->
    <button onclick="mostrarModal()" class="bg-orange-600 p-4 rounded-full shadow-md -mt-10 hover:bg-orange-700 transition" id="esfera">
        <img src="image (2).png" alt="Bola de cristal" class="w-12 h-12" />
        </button>

    <!-- Icono: Mensajes -->
    <button onclick="location.href='mensaje.html'" class="flex flex-col items-center text-gray-600 dark:text-gray-300 hover:text-blue-500 transition">
      <i data-lucide="message-circle" class="w-6 h-6"></i>
      <span class="text-xs">chat</span>
    </button>

    <!-- Icono: Configuración -->
    <button onclick="location.href='ajustes.html'" class="flex flex-col items-center text-gray-600 dark:text-gray-300 hover:text-green-500 transition">
      <i data-lucide="settings" class="w-6 h-6"></i>
      <span class="text-xs">Ajustes</span>
    </button>

  </div>
</nav>

<!-- Inicializar íconos -->
<script>
  lucide.createIcons();
</script>








<script>
  lucide.createIcons();

  

</script>

<audio id="spinSound" src="https://assets.mixkit.co/sfx/preview/mixkit-game-wheel-spin-1663.mp3" preload="auto"></audio>
</body>
</html>
